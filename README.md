# Ouroboros (–£—Ä–æ–±–æ—Ä–æ—Å)

–°–∞–º–æ–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–π—Å—è, —Å–∞–º–æ—ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏–π –∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ **Google Colab** (–æ–¥–Ω–∞ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è boot-—è—á–µ–π–∫–∞),
- –æ–±—â–∞–µ—Ç—Å—è —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —á–µ—Ä–µ–∑ **Telegram**,
- —Ö—Ä–∞–Ω–∏—Ç –∫–æ–¥ –∏ –ø—Ä–æ–º–ø—Ç—ã –≤ **GitHub**,
- —Ö—Ä–∞–Ω–∏—Ç –ª–æ–≥–∏/–ø–∞–º—è—Ç—å –≤ **Google Drive**.

## TL;DR (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)

1) –í Colab –¥–æ–±–∞–≤—å Secrets (–≤ –º–µ–Ω—é üîí):
- `OPENROUTER_API_KEY`
- `TELEGRAM_BOT_TOKEN`
- `TOTAL_BUDGET` (–Ω–∞–ø—Ä–∏–º–µ—Ä `100`)
- `GITHUB_TOKEN`
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OPENAI_API_KEY` (–¥–ª—è web_search)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `ANTHROPIC_API_KEY` (–¥–ª—è `claude_code_edit` —á–µ—Ä–µ–∑ Claude Code CLI)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `GITHUB_USER` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `razzant`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `GITHUB_REPO` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `ouroboros`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OUROBOROS_MODEL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `openai/gpt-5.2`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OUROBOROS_IDLE_ENABLED` (`1`/`0`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OUROBOROS_IDLE_COOLDOWN_SEC` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `900`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OUROBOROS_IDLE_BUDGET_PCT_CAP` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `35`)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OUROBOROS_IDLE_MAX_PER_DAY` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `8`)

2) –ó–∞–ø—É—Å—Ç–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é boot-—è—á–µ–π–∫—É –≤ Colab.
3) –ù–∞–ø–∏—à–∏ —Å–≤–æ–µ–º—É Telegram-–±–æ—Ç—É. –ü–µ—Ä–≤—ã–π –Ω–∞–ø–∏—Å–∞–≤—à–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.

## –í–µ—Ç–∫–∏ GitHub

- `main` ‚Äî –≤–µ—Ç–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–ª—è –ø—Ä–∞–≤–æ–∫ –≤ Cursor/–ª–æ–∫–∞–ª—å–Ω–æ (–£—Ä–æ–±–æ—Ä–æ—Å –µ—ë –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç).
- `ouroboros` ‚Äî —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–∫–∞ –£—Ä–æ–±–æ—Ä–æ—Å–∞ (—Å–∞–º–æ–∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ–º–º–∏—Ç—ã).
- `ouroboros-stable` ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è –æ—Ç–∫–∞—Ç–∞).

–°—É–ø–µ—Ä–≤–∏–∑–æ—Ä (boot-—è—á–µ–π–∫–∞) –∑–∞–ø—É—Å–∫–∞–µ—Ç `ouroboros`, –∞ –µ—Å–ª–∏ –æ–Ω –ø–∞–¥–∞–µ—Ç ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `ouroboros-stable`.

## Google Drive —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ü–∞–ø–∫–∞: `MyDrive/Ouroboros/`

- `state/state.json` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤–ª–∞–¥–µ–ª–µ—Ü, –±—é–¥–∂–µ—Ç, approvals
- `logs/` ‚Äî raw JSONL –ª–æ–≥–∏ (chat, events, tools, supervisor)
- `memory/` ‚Äî –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏ —Ä–∞–±–æ—á–∞—è –ø–∞–º—è—Ç—å
  - `memory/scratchpad.md` ‚Äî —Ä–∞–±–æ—á–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏/—Ä–µ—Å—Ç–∞—Ä—Ç–∞–º–∏
  - `memory/scratchpad_journal.jsonl` ‚Äî –∂—É—Ä–Ω–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π scratchpad
  - `memory/identity.md` ‚Äî self-model –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `index/` ‚Äî summaries.json –∏ –¥—Ä—É–≥–∏–µ –∏–Ω–¥–µ–∫—Å—ã
- `NOTES.md` ‚Äî –∑–∞–º–µ—Ç–∫–∏ ¬´—á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç / —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç¬ª

## –ö–æ–º–∞–Ω–¥—ã (Telegram)

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–º (–Ω–µ LLM) –∏ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã:
- `/panic` ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë (—Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É)
- `/restart` ‚Äî –º—è–≥–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏, –æ—á–∏—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π runtime-–∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
- `/status` ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á/–≤–µ—Ä—Å–∏–∏/–±—é–¥–∂–µ—Ç–∞

## –°–∞–º–æ–∏–∑–º–µ–Ω–µ–Ω–∏–µ

–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± –º–µ–Ω—è—Ç—å —Å–µ–±—è:
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tool `repo_write_commit(...)` (–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞ + commit + push –≤ `ouroboros`)
- –∑–∞—Ç–µ–º tool `request_restart(...)` (—á—Ç–æ–±—ã —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª runtime –∏ –ø–æ–¥—Ö–≤–∞—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è)

–î–ª—è –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã—Ö –ø—Ä–∞–≤–æ–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å:
- `claude_code_edit(...)` ‚Äî –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Claude Code CLI (headless), –ø—Ä–∞–≤–∏—Ç —Ñ–∞–π–ª—ã in-place
- `repo_commit_push(...)` ‚Äî –∫–æ–º–º–∏—Ç–∏—Ç –∏ –ø—É—à–∏—Ç —É–∂–µ –≤–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–∞ —Ü–µ–ª–∏–∫–æ–º)
- `request_restart(...)` ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥ –ø–æ—Å–ª–µ push

–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ `ouroboros-stable` —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (approval –≤ —á–∞—Ç–µ).

## Telegram: typing indicator

–í–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ—Ä–∫–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä `typing‚Ä¶` —á–µ—Ä–µ–∑ Telegram Bot API `sendChatAction`.

–í–∞–∂–Ω–æ: ‚Äú–≤ –º–æ–º–µ–Ω—Ç –ø–æ–ª—É—á–µ–Ω–∏—è‚Äù —Å–æ–æ–±—â–µ–Ω–∏—è (polling/webhook) —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä; –≤–æ—Ä–∫–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç —á—É—Ç—å –ø–æ–∑–∂–µ,
–ø–æ—ç—Ç–æ–º—É typing –ø–æ—è–≤–ª—è–µ—Ç—Å—è **–∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∞ –≤–∑—è—Ç–∞ –≤ —Ä–∞–±–æ—Ç—É**.

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ env:
- `OUROBOROS_TG_TYPING=0/1` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1`)
- `OUROBOROS_TG_TYPING_INTERVAL` (—Å–µ–∫, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `4`)

## Telegram: Markdown / formatting

Telegram –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ä–∞–∑–º–µ—Ç–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `sendMessage` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `parse_mode`.

–¢–∞–∫ –∫–∞–∫ —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä (boot-—è—á–µ–π–∫–∞) —Å–µ–π—á–∞—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ plain text, –≤–æ—Ä–∫–µ—Ä –¥–µ–ª–∞–µ—Ç **best-effort** —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–¥–Ω–∞–±–æ—Ä Markdown –≤ Telegram HTML (`parse_mode=HTML`),
- –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ **–Ω–∞–ø—Ä—è–º—É—é** —á–µ—Ä–µ–∑ Bot API.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ env:
- `OUROBOROS_TG_MARKDOWN=0/1` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1`)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ (best-effort):
- `**bold**`
- `` `inline code` ``
- fenced code blocks ```...```

## Telegram: voice notes (TTS)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ **voice notes** –≤ Telegram (–º–µ—Ç–æ–¥ Bot API `sendVoice`).

–ï—Å—Ç—å 2 —Ä–µ–∂–∏–º–∞ TTS:
- **local**: `ffmpeg` + —Ñ–∏–ª—å—Ç—Ä `flite` ‚Üí OGG/OPUS (—Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ/—è–∑—ã–∫ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã)
- **openai**: OpenAI Text-to-Speech API (`POST /v1/audio/speech`) ‚Üí OGG/OPUS (–ª—É—á—à–µ –¥–ª—è —Ä—É—Å/–∞–Ω–≥–ª, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `OPENAI_API_KEY`)

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π tool (–¥–ª—è –≤–æ—Ä–∫–µ—Ä–∞): `telegram_send_voice(chat_id, text, ..., tts='local'|'openai')`.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- –í–æ—Ä–∫–µ—Ä—ã –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ö–≤–æ—Å—Ç—ã `logs/chat.jsonl`, `logs/tools.jsonl`, `logs/events.jsonl`, `logs/supervisor.jsonl`, `logs/narration.jsonl`, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–º–Ω–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ—à–ª—ã—Ö —à–∞–≥–æ–≤.
- –í–æ—Ä–∫–µ—Ä—ã —Ç–∞–∫–∂–µ –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç `memory/scratchpad.md` –∏ `memory/identity.md`, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–±–æ—á–∏–π —Ñ–æ–∫—É—Å –∏ self-model –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –∞–≥–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç `scratchpad` —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç `prompts/SCRATCHPAD_SUMMARY.md` (–∫–æ–º–ø–∞–∫—Ç–Ω–æ, –±–µ–∑ –≤–æ–¥—ã, —Å –∫—Ä–∞—Ç–∫–∏–º–∏ evidence-—Ü–∏—Ç–∞—Ç–∞–º–∏ –∫–æ–º–∞–Ω–¥/–æ—à–∏–±–æ–∫).
- –ü—Ä–∏ direct-send —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ Telegram –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `chat.jsonl` –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á.
- Long polling Telegram –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å —Ä–µ—Ç—Ä–∞—è–º–∏; –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–∞–ª–∏—Ç—å —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä.

## Idle —Ä–µ–∂–∏–º (—Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ –≤ –ø—Ä–æ—Å—Ç–æ–µ)

–ö–æ–≥–¥–∞ –Ω–µ—Ç –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–¥–∞—á –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –±—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç, —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä –º–æ–∂–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ idle-–∑–∞–¥–∞—á–∏:
- –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –ø–∞–º—è—Ç–∏,
- –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏,
- –∏–¥–µ–∏ —É–ª—É—á—à–µ–Ω–∏—è –∫–æ–¥–∞,
- –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ web_search,
- –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–π –∏–¥–µ–∏ –≤–ª–∞–¥–µ–ª—å—Ü—É.

Guardrails:
- cooldown –º–µ–∂–¥—É idle-–∑–∞–¥–∞—á–∞–º–∏ (`OUROBOROS_IDLE_COOLDOWN_SEC`),
- –ª–∏–º–∏—Ç –¥–æ–ª–∏ –±—é–¥–∂–µ—Ç–∞ (`OUROBOROS_IDLE_BUDGET_PCT_CAP`),
- –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∑–∞–¥–∞—á (`OUROBOROS_IDLE_MAX_PER_DAY`).

## –ú–æ–¥–µ–ª–∏

–ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ OpenRouter: `openai/gpt-5.2` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
–î–∞–ª—å—à–µ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Å—Ç–∏ –Ω–∞ 3 –º–æ–¥–µ–ª–∏ (fast / chat / big).
